helmCharts:
  - name: immich
    releaseName: immich
    namespace: home
    version: 0.7.2
    repo: https://immich-app.github.io/immich-charts
    valuesInline:
      immich:
        persistence:
          library:
            existingClaim: immich-library-pvc
      env:
        - key: DB_HOSTNAME
          value: postgresql.db.svc.cluster.local
        - key: DB_USERNAME
          value: postgres
        - key: DB_DATABASE_NAME
          value: immich
        - key: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: immich-secrets
              key: DB_PASSWORD
      postgresql:
        enabled: false
      redis:
        enabled: true
        architecture: standalone
        auth:
          enabled: false
      envFrom:
        - secretRef:
            name: immich-secrets

namespace: home

resources:
  - pvc.yaml
  - sealed-secrets.yaml

patches: []
